<div class="chat-content">
	@if (userInfo.value(); as user) {
	<div class="flex justify-between items-center p-[15px] rounded-b-[12px] bg-[#030303]">
		<div class="flex items-center gap-x-[10px]">
			<div class="avatar">
				<div class="w-12 rounded-full">
					<img [src]="user.avatar_url??'https://proccmarket.com/avatars/avatar10.svg'" />
				</div>
			</div>
			<div>
				<h3 class="text-white text-[18px]">{{user.name??'user' + user.id}}</h3>
				<p class="text-white/50 text-[14px] leading-[100%]">{{user.role_name??'Гость'}}</p>
			</div>
		</div>
		<div class="dropdown dropdown-end">
			<div tabindex="0" role="button" class="btn btn-sm btn-circle m-1"><lucide-icon
					[name]="ICONS.EllipsisVertical"></lucide-icon></div>
			<ul tabindex="-1" class="dropdown-content menu bg-base-100 rounded-box z-1 w-40 p-2 shadow-sm">
				<li><a class=" text-green-500"><lucide-icon [name]="ICONS.ShieldCheck" size="18"></lucide-icon>Гарант</a></li>
				<li (click)="deleteChat()"><a class="text-orange-600"><lucide-icon [name]="ICONS.Trash2"
							size="18"></lucide-icon>Удалить чат</a></li>
			</ul>
		</div>
	</div>
	}@else {
	<div class="skeleton w-full h-[78px]"></div>
	}
	<div class="overflow-y-scroll chat-canvas px-[15px] overflow-y-auto scroll-smooth" #chatCanvas>
		@defer (when messages(); prefetch on idle) {
		@if(messages(); as msgs) {
		@for (item of msgs.messages; track item.id) {
		<app-message [message]="{message:item, user_id: +user_id()!}"></app-message>
		}
		@if (msgs.messages.length === 0) {
		<div class="w-full h-full flex flex-col items-center justify-center">
			<img src="https://proccmarket.com/svg/empty-chats.svg" alt="empty-chats" class="w-full max-w-[200px] h-auto">
			<p class="text-center text-black/50 py-[20px]">Пока сообщений нет. Начните разговор!</p>
		</div>
		}
		}
		}@placeholder {
		<div class="space-y-[10px] pt-[10px]">
			<div class="skeleton w-[50%] h-[42px]"></div>
			<div class="skeleton w-[50%] ml-auto h-[42px]"></div>
			<div class="skeleton w-[50%] h-[42px]"></div>
			<div class="skeleton w-[50%] ml-auto h-[42px]"></div>
		</div>
		}
	</div>
	<div>
		<app-message-form [chat_id]="+chat_id()!"></app-message-form>
	</div>
</div>