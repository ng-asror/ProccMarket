@if (itemSignal(); as item) {
<div class="p-[10px] border-1 border-[#E1E1E1] rounded-[12px] grid grid-cols-1 gap-y-[10px]">
	<div class="flex items-center justify-between">
		<div class="flex items-center gap-x-[5px] cursor-pointer" (click)="openUserModal(item.author)">
			<div class="avatar">
				<div class="w-[40px] rounded-full">
					<img [src]="item.author.avatar_url? item.author.avatar_url: 'https://proccmarket.com/avatars/avatar10.svg'" />
				</div>
			</div>
			<div>
				<h4 class="text-lg font-[400] leading-[100%]">{{item.author.name??'user' + item.author.id}}</h4>
				<p class="text-sm text-black/60">{{item.author.role_name??'Гость'}}</p>
			</div>
		</div>
		<b class="text-black text-[16px]">{{item.author.balance}}$</b>
	</div>
	<img [src]="item.image_url" alt="form img" [routerLink]="'/home/topic/' + item.id"
		class="w-full object-cover object-center h-[100px] rounded-[12px] cursor-pointer block">
	<a [routerLink]="'/home/topic/' + item.id"
		class="text-[20px] block hover:underline title text-[#030303] font-[400] leading-[120%] cursor-pointer">{{item.title}}
	</a>
	<div class="flex items-end justify-between">
		<div class="flex items-center gap-x-[20px]">
			<button type="button" class="text-black/50 text-[18px] flex flex-col items-center gap-x-[5px] cursor-pointer"
				(click)="topicToggleLike(item.id, true)">
				<lucide-icon [name]="ICONS.ThumbsUp"
					[color]="item.user_reaction === 'like'?'#030303':'#00000080'"></lucide-icon>
				<span class="block" [class.text-[#030303]]="item.user_reaction === 'like'?'#030303':''">{{item.likes_count
					| numeral:
					'0a'}}</span>
			</button>
			<button type="button" class="text-black/50 text-[18px] flex flex-col items-center gap-x-[5px] cursor-pointer"
				(click)="topicToggleLike(item.id, false)">
				<lucide-icon [name]="ICONS.ThumbsDown"
					[color]="item.user_reaction === 'dislike'?'#030303':'#00000080'"></lucide-icon>
				<span class="block" [class.text-[#030303]]="item.user_reaction === 'dislike'?'#030303':''">{{item.dislikes_count
					|
					numeral: '0a'}}</span>
			</button>
			<a routerLink="" class="text-black/50 text-[18px] flex flex-col items-center gap-x-[5px]">
				<lucide-icon [name]="ICONS.MessagesSquare"></lucide-icon>
				<span class="block">{{item.posts_count| numeral: '0a'}}</span>
			</a>
		</div>
		<p class="text-[#A8A8A8] text-[16px] font-[400] leading-[100%] text-end">
			{{item.created_at | dateFormat:'DD MMM HH:MM'}}
		</p>
	</div>
</div>
<!-- User modal -->
<input type="checkbox" id="" class="modal-toggle" />
<dialog class="modal modal-bottom sm:modal-middle" #userModal>
	<div class="modal-box">
		@if (author(); as author) {
		<div class="mb-[-35px]">
			@if(author.cover) {
			<img [src]="author.cover_url" [alt]="author.name" class="w-full h-[130px] rounded-box object-cover object-center">
			}@else {
			<div class="w-full h-[130px] rounded-box bg-[#F2F2F2]"></div>
			}
		</div>
		<div class="flex items-end gap-x-[10px]">
			<div class="rounded-box w-[90px] h-[90px] border-4 bg-[#ffff] border-[#fff] overflow-hidden">
				@if(author.avatar_url !== null){
				<img src="{{author.avatar_url}}" alt="user face" class="w-full h-full block object-cover object-center">
				}@else {
				<img src="https://proccmarket.com/avatars/avatar10.svg" alt="avatar10" class="w-full h-full block rounded-full">
				}
			</div>
			<div class="mb-[10px]">
				<h1 class="text-[20px] text-[#030300] font-[500] mb-1 leading-[100%]">
					{{author.name??'user' + author.id}}</h1>
				<h2 class="text-[16px] lowercase text-[#030300] font-[500] leading-[100%]">
					{{author.role_name? author.role_name: 'Гость'}}</h2>
			</div>
		</div>
		<p class="text-[16px] text-[#030300] leading-[120%] font-[400] block">{{author.description}}</p>
		<button type="button" class="btn btn-primary w-full mt-[10px]" (click)="createChat(author.id)">Написать
			сообщение</button>
		}
		<form method="dialog">
			<button class="btn btn-sm btn-circle absolute right-2 top-2">✕</button>
		</form>
	</div>
</dialog>
}